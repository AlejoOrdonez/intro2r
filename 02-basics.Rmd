# Some R basics {#basics_r}

In this Chapter we'll introduce you to using R and RStudio to perform some basic R tasks such as creating variables and assigning values to variables, exploring different types of variables and how to perform some common operations on variables. We'll also learn how to get help in R and highlight some resources to help support your R learning. Finally, we'll cover how to save your work. 

Before we continue, here are a few things to bear in mind as you work through this Chapter:

  - R is case sensitive i.e. `A` is not the same as `a` and `anova` is not the same as `Anova`.
  
  - Anything that follows a `#` symbol is interpreted as a comment and ignored by R. Comments should be used liberally throughout your code for both your own information and also to help your collaborators. Writing comments is a bit of an [art][comment] and something that you will become more adept at as your experience grows. 
  
  - In R, commands are generally separated by a new line. You can also use a semicolon `;` to separate your commands but this is rarely used.

  - If a continuation prompt `+` appears after you execute your code this means that you haven't completed your code correctly. This often happens if you forget to close a bracket and is especially common when nested brackets are used (`(((some command))`). Just finish the command on the new line and fix the typo or hit escape on your keyboard (see point below) and fix.

  - In general, R is fairly tolerant of extra spaces inserted into your code, in fact using spaces is actively encouraged. However, spaces should not be inserted into operators i.e. `<-` should not read `< -` (note the space). See Google's [style guide][style-google] for advice on where to place spaces to make your code more readable.
  
  - If your console 'hangs' and becomes unresponsive after running a command you can often get yourself out of trouble by pressing the escape key (esc) on your keyboard or clicking on the stop icon in the top right of your console. This will terminate most current operations.  
  
## Getting started

In [Chapter 1](#chap1) we learned about the [R Console](#cons) and creating scripts and [Projects](#rsprojs) in RStudio. We also saw how you write your R code in a script and then source this code into the console to get it to run (if you've forgotten how to do this, pop back to the [console](#cons) section to refresh your memory). Writing your code in a script means that you'll always have a permanent record of everything you've done (provided you save for script) and also allows you to make loads of comments to remind your future self what you've done. So, while you're working through this Chapter we suggest that you create a new script (or RStudio [Project](#rsprojs)) to write your code as you follow along. You can find a copy of an example script for this Chapter [here] **TODO** 

As we saw in the previous [Chapter](#chap1), at a basic level we can use R much as you would use a calculator. We can type an arithmetic expression into our script, then source it into the console and receive a result. For example, if we type the expression `2 + 2` and then source this line of code we get the answer `4` (reassuringly!)

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
2 + 2
```

The `[1]` in front of the result tells you that the observation number at the beginning of the line is the first observation. This is not much help in this example, but can be quite useful when printing results with multiple lines (we'll see an example below). The other obvious arithmetic operators are `-`, `*`, `/` for subtraction, multiplication and division respectively. R follows the usual mathematical convention of [order of operations][op-prec]. For example, the expression `2 + 3 * 4` is interpreted to have the value `2 + (3 * 4) = 14`, not `(2 + 3) * 4 = 20`. There are a huge range of mathematical functions in R, some of the most useful include

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
log(1)				# logarithm to base e
log10(1)			# logarithm to base 10
exp(1)				# natural antilog
sqrt(4) 			# square root
4^2					# 4 to the power of 2
pi 					# not a function but useful
```

It's important to realise that when you run code as we've done above, the result of the code (or **value**) is only displayed in the console. Whilst this can sometimes be useful it is usually much more practical to store the value(s) in a object.

## Objects in R

At the heart of almost everything you will do (or ever likely do) in R is the concept that everything in R is an [object][chambers]. These objects can be almost anything, from a single number or character string (like a word) to highly complex structures like the output of a plot, a summary of your statistical analysis or a set of R commands that perform a specific task. Understanding how you create objects and assign values to objects is key to understanding R.

### Creating objects

To create an object we simply give the object a name. We can then assign a value to this object using the *assignment operator* `<-` (sometimes called the *gets operator*). The assignment operator is a composite symbol comprised of a ‘less than’ symbol `<` and a hyphen `-` .

```{r, echo=TRUE, eval=TRUE}
my_obj <- 48
```

In the code above, we created an object called `my_obj` and assigned it a value of the number `48` using the assignment operator (in my head I always read this as '*my_obj gets 48*'). You can also use `=` instead of `<-` to assign values but this is considered bad practice and we would discourage you from using this notation. 

To view the value of the object you simply type the name of the object

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
my_obj
```

Now that we've created this object, R knows all about it and will keep track of it during this current R session. All of the objects you create will be stored in the current workspace and in RStudio you can view all the objects in your workspace by clicking on the 'Environment' tab in the right hand pane. 

\  

```{r rstudio_env, echo=FALSE, out.width="75%", fig.align="center"}
knitr::include_graphics(path = "images/rs_env.png")
```

\  

If you click on the down arrow on the 'List' icon in the same pane and change to 'Grid' view RStudio will show you a summary of the objects including the type (numeric - it's a number), the length (only one value in this object), its 'physical' size and its value (48 in this case).

\  

```{r rstudio_env2, echo=FALSE, out.width="75%", fig.align="center"}
knitr::include_graphics(path = "images/rs_env2.png")
```

\  

There are many different types of values that you can assign to an object. For example 

```{r, echo=TRUE, eval=TRUE}
my_obj2 <- "R is cool"
```

Here we have created an object called `my_obj2` and assigned it a value of `R is cool` which is a character string. Notice that we have enclosed the string in quotes. If you forget to use the quotes you will receive an error message

```{r, echo=TRUE, eval=FALSE}
my_obj2 <- R is cool
Error: unexpected symbol in "my_obj2 <- R is"
```

Our workspace now contains both objects we have created so far with `my_obj2` listed as type character.  

\  

```{r rstudio_env3, echo=FALSE, out.width="75%", fig.align="center"}
knitr::include_graphics(path = "images/rs_env3.png")
```

\  

  To change the value of an existing object we simple reassign our new value to it. For example to change the value of `my_obj2` from `"R is cool"` to the number `1024`

```{r, echo=TRUE, eval=TRUE}
my_obj2 <- 1024
```

Notice that the Type has changed to numeric and the value has changed to 1024 in the workspace

\  

```{r rstudio_env4, echo=FALSE, out.width="75%", fig.align="center"}
knitr::include_graphics(path = "images/rs_env4.png")
```

\  

Once we have created a few objects, we can do stuff with our objects. For example, the following code

```{r, echo=TRUE, eval=TRUE}
my_obj3 <- my_obj + my_obj2
my_obj3
```

creates a new object `my_obj3` and assigns it the value of `my_obj` added to `my_obj2` which is 1072 (48 + 1024 = 1072). Notice that to display the value of `my_obj3` we also need to write the object's name. The above code works because the values of both `my_obj` and `my_obj2` are numeric (i.e. a number). If you try to do this with objects with character values (**character class**) you will receive an error

```{r, echo=TRUE, eval=FALSE}
char_obj <- "hello"
char_obj2 <- "world!"
char_obj3 <- char_obj + char_obj2
Error in char_obj + char_obj2 : non-numeric argument to binary operator
```

The error message is essentially telling you that either one or both of the objects `char_obj` and `char_obj2` is not a number and therefore cannot be added together. 

When you first start learning R, dealing with errors and warnings can be frustrating as they're often difficult to understand (what's an [*argument*][r_arg]? what's a [*binary operator*][bin_op]?). One way to find out more information about a particular error is to Google a generalised version of the error message. For the above error try Googling [*'non-numeric argument to binary operator error + r'*][non_num_err] or even [*'common r error messages'*][com_err]. 

Another error message that you'll get quite alot when you first start using R is `Error: object 'XXX' not found`. As an example, take a look at the code below

```{r, echo=TRUE, eval=FALSE}
my_obj <- 48
my_obj4 <- my_obj + no_obj
Error: object 'no_obj' not found
```

R returns an error message because we haven't created (defined) the object `no_obj` yet. You should also realise that because the code returned an error message the object `my_obj4` has not been created.  

### Naming objects

Naming your objects is one of the most difficult things you will do in R (honestly - we're serious). Ideally your object names should be kept short and informative which is not always easy. If you need to create objects with multiple words in their name then use either an underscore or a dot between words or capitalise the different words. We prefer the underscore format (called [*snake case*][snake])

```{r, echo=TRUE, eval=FALSE}
output_summary <- "my analysis"
output.summary <- "my analysis"
outputSummary <- "my analysis"
```

There are also a few limitations when it come to giving objects names. An object name cannot start with a number or a dot followed by a number (i.e. `2my_variable` or `.2my_variable`).  You should also avoid using non-alphanumeric characters in your object names (i.e. &, ^, /, ! etc). In addition, make sure you don’t name your objects with reserved words (i.e. `TRUE`, `NA`) and it's never a good idea to give your object the same name as a built-in function. One that crops up more times than we can remember is 

```{r, echo=TRUE, eval=FALSE}
data <- read.table("mydatafile", header = TRUE) # data is a function!
```

## R functions

Up until now we've been creating simple objects by directly assigning a single value to an object. It's very likely that you'll soon want to progress to creating more complicated objects as your R experience grows and the complexity of your tasks increase. Happily, R has a multitude of functions to help you do this. You can think of a function as an object which contains a series of instructions to perform a specific task. The base installation of R comes with many functions already defined or you can increase the power of R by installing one of the 10000's of [packages](#packages) now available. Once you get a bit more experience with using R you may want to define your own functions to perform tasks that are specific to your goals (more about this in [Chapter 6](#prog_r)).

### Using functions

The first function we will learn about is the `c()` function which we will use to join together a series of numbers and store them in a data structure called a [**vector**][vector] (more on vectors in [Chapter 3](#data_r)). The `c()` function is short for concatenate.

```{r, echo=TRUE, eval=TRUE}
my_vec <- c(2, 3, 1, 6, 4, 3, 3, 7)
```

In the code above we have created an object called `my_vec` and assigned it a value using the function `c()`. There are a couple of really important points to note here. Firstly, when you use a function in R, the function name is **always** followed by a pair of round brackets even if there's nothing contained between the brackets. Secondly, the argument(s) of a function are placed within the round brackets and are separated by commas. You can think of an argument as way of customising the use or behaviour of a function. In the example above, the arguments are the numbers we want to concatenate. Finally, one of the tricky things when you first start using R is to know which function to use for a particular task and how to use it. Thankfully each function will always have a help document associated with it which will explain how to use the function (more on this [later](#help)) and a quick Google search will also usually help you out. 

To examine the value of our new object we can simply type out the name of the object as we did before

```{r, echo=TRUE, eval=TRUE}
my_vec
```

Now that we've created a vector we can use other functions to do useful stuff with this object. For example, we can calculate the mean, variance, standard deviation and number of elements in our vector by using the `mean()`, `var()`, `sd()` and `length()` functions

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
mean(my_vec)          # returns the mean of my_vec
var(my_vec)           # returns the variance of my_vec
sd(my_vec)            # returns the standard deviation of my_vec
length(my_vec)        # returns the number of elements in my_vec
```

If we wanted to use any of these values later on in our analysis we can just assign the resulting value to another object

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
vec_mean <- mean(my_vec)          # returns the mean of my_vec
vec_mean
```

Sometimes it can be useful to create a vector that contains a regular sequence of values in steps of one. Here we can make use of a shortcut using the `:` symbol.

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
my_seq <- 1:10     # create regular sequence
my_seq
my_seq2 <- 10:1    # in decending order
my_seq2
```

Other useful functions for generating vectors of sequences include the `seq()` and `rep()` functions. For example, to generate a sequence from 1 to 5 in steps of 0.5

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
my_seq2 <- seq(from = 1, to = 5, by = 0.5)
my_seq2
```

Here we have used the arguments `from =` and `to =` to define the limits of the sequence and the `by =` argument to specify the increment of the sequence. Try out other values for the arguments to see their effect.

The `rep()` function allows you to replicate (repeat) values a specified number of times. To repeat the value 2, 10 times

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
my_seq3 <- rep(2, times = 10)	# repeats 2, 10 times
my_seq3
```

You can also repeat non-numeric values

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
my_seq4 <- rep("abc", times = 3)	# repeats ‘abc’ 3 times 
my_seq4
```

or repeat a series

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
my_seq5 <- rep(1:5, times = 3)		# repeats the series 1 to 5, 3 times
my_seq5
```

or elements of a series

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
my_seq6 <- rep(1:5, each = 3)	# repeats each element of the series 3 times
my_seq6
```

We can also repeat a non-sequential series

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
my_seq7 <- rep(c(3, 1, 10, 7), each = 3)	# repeats each element of the series 3 times
my_seq7
```

Note in the code above how we've used a function (`c()`) inside another function (`seq()`). This allows us to build quite complex commands within a single line of code and is a very common practice when using R. However, care needs to be taken as too many nested functions can make your code quite difficult for others to understand (or yourself some time in the future!). We could rewrite the code and explicitly separate the two different steps of generating a vector to repeat and then repeating this vector. Either approach will give the same result, you just need to use your own judgement as to which is more readable.

```{r, echo=TRUE, eval=TRUE, collapse=TRUE}
in_vec <- c(3, 1, 10, 7)
my_seq7 <- rep(in_vec, each = 3)	# repeats each element of the series 3 times
my_seq7
```


## Manipulating objects

extracting, sorting and ordering  

## Getting help

### R help {#help}

### Other sources of help

## Saving in R


vectors  
extracting, sorting and ordering  








```{r links, child="links.md"}
```

